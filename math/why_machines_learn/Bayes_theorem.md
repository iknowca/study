# Bayes' Theorem

어떤 사건의 사후 확률을 계산하는 공식. 사건 A와 B가 있을 때, 사건 A가 주어졌을 때 사건 B가 발생할 확률은 다음과 같이 표현된다.

$$P(B|A) = \frac{P(A|B) \cdot P(B)}{P(A)}$$

* P(B|A): 사건 A가 주어졌을 때 사건 B가 발생할 확률 (사후 확률)
* P(A|B): 사건 B가 주어졌을 때 사건 A가 발생할 확률 (우도)
* P(B): 사건 B가 발생할 확률 (사전 확률)
* P(A): 사건 A가 발생할 확률 (정규화 상수)

사전확률 $P(B)$는 사건 B에 대한 초기 신념으로 간주되며,
우도 $P(A|B)$는 B가 참이라면 B라는 관측은 얼마나 그럴듯한지를 나타낸다.
사후확률 $P(B|A)$는 관측 A가 주어졌을 때 사건 B에 대한 업데이트된 신념을 나타낸다.

## 예시

### 코로나19 양성 검사 양성 결과

어떤 코로나19 자가진단키트가 민감도 90% 특이도 99%라고 하자.
또한 지역 A의 코로나19 유병률이 1%라고 하자.

- 민감도: 실제로 코로나에 감염된 사람 중 검사에서 양성으로 나올 확률 (90%)
- 특이도: 실제로 코로나에 감염되지 않은 사람 중 검사에서 음성으로 나올 확률 (99%)
- 유병률: 전체 인구 중 실제로 코로나에 감염된 사람의 비율 (1%)

어떤 사람이 검사를 받았고, 결과가 양성인 경우, 이 사람이 실제로 코로나에 감염되었을 확률을 베이즈 정리를 사용하여 계산해보자.<br>
우선 민감도는 감염된 사람이 양성으로 나올 확률이므로, $P(\text{양성}|\text{감염}) = 0.9$ 이다.<br>
하지만 여기서 알고자 하는 것은 $P(\text{감염}|\text{양성})$ 이다. 즉, 검사 결과가 양성일 때 실제로 감염되었을 확률이다.

$$
P(\text{감염}|\text{양성}) = \frac{P(\text{양성}|\text{감염}) \cdot P(\text{감염})}{P(\text{양성})}
$$

여기서,
- $P(\text{양성}|\text{감염}) = 0.9$ (민감도)
- $P(\text{감염}) = 0.01$ (유병률)
- $P(\text{양성})$는 전체 인구에서 검사 결과가 양성일 확률로, 다음과 같이 계산할 수 있다.

$$
P(\text{양성}) = P(\text{양성}|\text{감염}) \cdot P(\text{감염}) + P(\text{양성}|\text{비감염}) \cdot P(\text{비감염})
$$

여기서,
- $P(\text{양성}|\text{비감염}) = 1 - P(\text{음성}|\text{비감염}) = 1 - 0.99 = 0.01$ (특이도에서 음성 확률을 뺀 값)
- $P(\text{비감염}) = 1 - P(\text{감염}) = 0.99$

따라서,
$$
P(\text{양성}) = 0.9 \cdot 0.01 + 0.01 \cdot 0.99 = 0.009 + 0.0099 = 0.0189
$$

이제 모든 값을 대입하여 계산해보자.

$$
P(\text{감염}|\text{양성}) = \frac{0.9 \cdot 0.01}{0.0189} = \frac{0.009}{0.0189} \approx 0.4762
$$

따라서, 검사 결과가 양성일 때 실제로 감염되었을 확률은 약 47.62%이다. 이는 검사 결과가 양성이라고 해서 반드시 감염되었다고 단정할 수 없음을 보여준다.